{% extends "base.html" %}
{% load static %}

{% block title %}All Artisan Stories - SokherBazar{% endblock %}

{% block content %}
<section class="bg-white">
  <!-- Hero -->
  <div class="relative">
    <div class="h-[260px] md:h-[360px] w-full bg-cover bg-center"
         style="background-image:url('https://images.unsplash.com/photo-1601758124361-2a2cbb8d2161?auto=format&fit=crop&w=1400&q=80');">
    </div>
    <div class="absolute inset-0 bg-[#2C3E50]/60"></div>

    <div class="absolute inset-0 flex items-center justify-center text-center px-4">
      <div class="max-w-3xl text-white">
        <h1 class="text-3xl md:text-5xl font-semibold">Stories of Passion & Craft</h1>
        <p class="mt-3 text-white/90 md:text-lg">
          Every handmade piece carries a journey. Read stories of artisans, culture,
          and the lives touched by SokherBazar.
        </p>
      </div>
    </div>
  </div>

  <!-- Stories -->
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <h2 class="text-2xl md:text-3xl font-semibold text-[#2C3E50] text-center">Featured Stories</h2>
    <div class="w-20 h-1 bg-[#D35400] mx-auto mt-3 rounded-full"></div>

    <div class="mt-8 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {% for story in stories %}
        <a href="{% url 'story_detail' story.id %}"
           class="group block rounded-2xl overflow-hidden border border-gray-100 bg-white shadow-sm hover:shadow-md transition">
          <!-- Image -->
          <div class="relative h-48 bg-gray-50 overflow-hidden">
            {% if story.image %}
              <img src="{{ story.image.url }}" alt="{{ story.title }}"
                   class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
            {% else %}
              <img src="{% static 'images/default-story.jpg' %}" alt="Story"
                   class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
            {% endif %}
            <div class="absolute inset-0 bg-black/0 group-hover:bg-black/5 transition"></div>
          </div>

          <!-- Content -->
          <div class="p-5">
            <h3 class="text-lg md:text-xl font-semibold text-[#D35400] line-clamp-2">
              {{ story.title }}
            </h3>

            <div class="mt-1 text-sm text-gray-500 flex flex-wrap items-center gap-x-2 gap-y-1">
              <span>By {{ story.author|default:"SokherBazar" }}</span>
              {% if story.category %}<span>• {{ story.category }}</span>{% endif %}
              {% if story.read_time %}<span>• {{ story.read_time }}</span>{% endif %}
            </div>

            <p class="mt-3 text-gray-700 line-clamp-3">
              {{ story.content|default_if_none:""|truncatewords:30 }}
            </p>

            <span class="mt-4 inline-flex items-center gap-2 text-[#27AE60] font-semibold">
              Read More
              <svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l5
                5a1 1 0 01-1.414 1.414L12 6.414V17a1 1 0 11-2 0V6.414L6.707
                9.707A1 1 0 015.293 8.293l5-5z" clip-rule="evenodd" />
              </svg>
            </span>
          </div>
        </a>
      {% empty %}
        <div class="col-span-full">
          <div class="rounded-xl border border-gray-200 bg-white p-8 text-center">
            <p class="text-gray-600">No stories found.</p>
            <a href="{% url 'product_list' %}"
               class="inline-flex items-center gap-2 mt-4 h-11 px-6 rounded-full bg-[#D35400] text-white font-semibold hover:bg-orange-600 transition">
              Browse Products
            </a>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>
{% endblock %}
