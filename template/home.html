{% extends "base.html" %}
{% load static %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SokherBazar - Authentic Handmade Products from Bangladesh</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
    --primary: #D35400;
    --secondary: #27AE60;
    --accent: #E67E22;
    --light: #FEF5E7;
    --dark: #2C3E50;
    --text: #333333;
    --text-light: #777777;
    --white: #FFFFFF;
}

* { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
body { color: var(--text); background-color: var(--white); line-height:1.6; }
.container { width:100%; max-width:1200px; margin:0 auto; padding:0 20px; }

/* Buttons */
.btn { display:inline-block; padding:12px 28px; border-radius:50px; text-decoration:none; font-weight:600; transition: all 0.3s ease; cursor:pointer; }
.btn-primary { background-color: var(--primary); color: var(--white); border: 2px solid var(--primary); }
.btn-primary:hover { background-color: transparent; color: var(--primary); }
.btn-secondary { background-color: transparent; color: var(--primary); border:2px solid var(--primary); }
.btn-secondary:hover { background-color: var(--primary); color: var(--white); }

.read-more {
    text-decoration: none;
    color: var(--secondary);
    font-weight: 600;
    transition: color 0.3s;
    display:inline-block;
    margin-top:10px;
}
.read-more:hover { color: var(--primary); }

.section-title { font-size:2.2rem; text-align:center; margin-bottom:2.5rem; color: var(--dark); }

/* Hero */
.hero { background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1605311364336-39337b2d6eb9?auto=format&fit=crop&w=1500&q=80'); background-size: cover; background-position: center; color: var(--white); padding:100px 0; text-align:center; }
.hero-content { max-width:800px; margin:0 auto; }
.hero h1 { font-size:3rem; margin-bottom:20px; line-height:1.2; }
.hero p { font-size:1.2rem; margin-bottom:30px; }
.search-bar { display:flex; max-width:600px; margin:30px auto; }
.search-bar input { flex:1; padding:15px 20px; border:none; border-radius:50px 0 0 50px; font-size:1rem; }
.search-bar button { padding:0 25px; background: var(--primary); color:white; border:none; border-radius:0 50px 50px 0; cursor:pointer; }

/* Products Grid */
.products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 25px;
}
.product-card {
    display: block;
    background: var(--white);
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s;
    text-decoration: none;
    color: inherit;
}
.product-card:hover { transform: translateY(-5px); }
.product-image { height:200px; overflow:hidden; }
.product-image img { width:100%; height:100%; object-fit:cover; transition: transform 0.4s; }
.product-card:hover img { transform: scale(1.05); }
.product-content { padding:20px; display:flex; flex-direction: column; }
.product-name { font-size:1.2rem; margin-bottom:8px; color: var(--dark); }
.product-price { font-weight:700; color: var(--primary); margin-bottom:10px; }

/* Categories */
.categories { padding:80px 0; background-color: var(--light); }
.category-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; }

/* ✅ FIXED category card to match product card style */
.category-card {
    display: block;
    background: var(--white);
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s;
    text-decoration: none;
    color: inherit;
}
.category-card:hover { transform: translateY(-5px); }

.category-image {
    height:200px;
    overflow:hidden;
}
.category-image img {
    width:100%;
    height:100%;
    object-fit:cover;
    transition: transform 0.4s;
}
.category-card:hover img { transform: scale(1.05); }

.category-content {
    padding:20px;
}
.category-content h3 {
    margin-bottom: 10px;
    color: var(--dark);
    font-size: 1.3rem;
}
.category-content p {
    font-size: 0.95rem;
    color: var(--text-light);
}

/* Featured Stories */
.featured-stories { padding:80px 0; }
.stories-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:30px; }
.story-card { border-radius:10px; overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.1); transition: transform 0.3s; text-decoration:none; color:inherit; }
.story-card:hover { transform: translateY(-5px); }
.story-img { height:200px; background-size:cover; background-position:center; }
.story-content { padding:20px; }
.story-content h3 { margin-bottom:10px; color: var(--dark); }

/* CTA Section */
.cta-section { padding:80px 0; text-align:center; background: linear-gradient(to right, var(--primary), var(--accent)); color:white; }
.cta-section h2 { font-size:2.5rem; margin-bottom:20px; }
.cta-section p { margin-bottom:30px; font-size:1.1rem; }

</style>
</head>
<body>

<!-- Hero Section -->
<section class="hero">
  <div class="hero-content">
    <h1>Buy Authentic Handmade Products Direct from Bangladeshi Artisans</h1>
    <p>Discover unique handmade creations while supporting rural artisans and preserving traditional crafts</p>
    <form method="GET" action="{% url 'home' %}" class="search-bar">
      <input type="text" name="q" placeholder="Search for products, categories, or artisans..." value="{{ query }}">
      <button type="submit"><i class="fas fa-search"></i></button>
    </form>
    <a href="{% url 'product_list' %}" class="btn btn-primary">Start Shopping</a>
    <a href="{% url 'register' %}" class="btn btn-primary">Become a Seller</a>
  </div>
</section>

<!-- Featured Products -->
<section class="featured-products">
  <div class="container">
    <h2 class="section-title">Our Products</h2>
    <div class="products-grid">
      {% for product in products %}
      <a href="{% url 'product_detail' product.id %}" class="product-card">
        <div class="product-image">
          {% if product.image %}
          <img src="{{ product.image.url }}" alt="{{ product.name }}">
          {% else %}
          <img src="{% static 'images/default-product.jpg' %}" alt="{{ product.name }}">
          {% endif %}
        </div>
        <div class="product-content">
          <h3 class="product-name">{{ product.name }}</h3>
          <p class="product-price">৳ {{ product.price }}</p>
          <span class="read-more">View Details →</span>
        </div>
      </a>
      {% empty %}
      <p>No products found.</p>
      {% endfor %}
    </div>
  </div>
</section>

<!-- ✅ Categories (Fixed image sizing) -->
<section class="categories">
  <div class="container">
    <h2 class="section-title">Shop by Category</h2>
    <div class="category-grid">
      {% for category in categories %}
      <a href="{% url 'product_list' %}?category={{ category.id }}" class="category-card">
        <div class="category-image">
          {% if category.image %}
          <img src="{{ category.image.url }}" alt="{{ category.name }}">
          {% else %}
          <img src="{% static 'images/default-category.jpg' %}" alt="{{ category.name }}">
          {% endif %}
        </div>
        <div class="category-content">
          <h3>{{ category.name }}</h3>
          <p>{{ category.description|truncatewords:15 }}</p>
        </div>
      </a>
      {% empty %}
      <p>No categories found.</p>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Featured Stories -->
<section class="featured-stories">
  <div class="container">
    <h2 class="section-title">Featured Artisan Stories</h2>
    <div class="stories-grid">
      {% for story in stories %}
      <a href="{% url 'story_detail' story.id %}" class="story-card">
        <div class="story-img" style="background-image:url('{{ story.image.url }}');"></div>
        <div class="story-content">
          <h3>{{ story.title }}</h3>
          <p>{{ story.content|truncatewords:20 }}</p>
          <span class="read-more">Read More →</span>
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
</section>

<!-- CTA Section -->
<section class="cta-section">
  <div class="container">
    <h2>Join the SokherBazar Community</h2>
    <p>Whether you're looking to buy unique handmade products or sell your creations, SokherBazar is the perfect platform for you.</p>
    <a href="{% url 'register' %}" class="btn btn-secondary">Sign Up as Artisan</a>
    <a href="{% url 'product_list' %}" class="btn btn-primary" style="margin-left:15px;">Start Shopping</a>
  </div>
</section>

</body>
</html>
{% endblock %}
