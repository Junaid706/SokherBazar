{% extends 'base.html' %}
{% load static %}

{% block title %}My Orders - SokherBazar{% endblock %}

{% block content %}
<style>
.orders-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 20px;
    background-color: #FEF5E7;
    min-height: 100vh;
}

.orders-header {
    background: linear-gradient(to right, #D35400, #E67E22);
    color: white;
    padding: 30px;
    border-radius: 15px;
    margin-bottom: 30px;
    text-align: center;
}

.order-card {
    background: white;
    border-radius: 10px;
    padding: 25px;
    margin-bottom: 20px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.status-pending { color: #E67E22; }
.status-processing { color: #3498DB; }
.status-shipped { color: #2980B9; }
.status-delivered { color: #27AE60; }
.status-cancelled { color: #E74C3C; }
</style>

<div class="orders-container">
    <div class="orders-header">
        <h1><i class="fas fa-shopping-bag"></i> My Orders</h1>
        <p>Track your purchases and order history</p>
    </div>

    {% if orders %}
        {% for order in orders %}
        <div class="order-card">
            <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 15px;">
                <h3 style="margin: 0;">Order #{{ order.id }}</h3>
                <span class="status-{{ order.status|lower }}" style="font-weight: bold;">
                    {{ order.status }}
                </span>
            </div>
            <p style="color: #777; margin: 0 0 15px 0;">Placed on {{ order.created_at|date:"F d, Y" }}</p>
            
            <div style="border-top: 1px solid #eee; padding-top: 15px;">
                {% for item in order.items.all %}
                <div style="display: flex; align-items: center; margin-bottom: 10px;">
                    <div style="width: 60px; height: 60px; border-radius: 5px; overflow: hidden; margin-right: 15px;">
                        {% if item.product.image %}
                        <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" style="width: 100%; height: 100%; object-fit: cover;">
                        {% else %}
                        <img src="{% static 'images/default-product.jpg' %}" alt="{{ item.product.name }}" style="width: 100%; height: 100%; object-fit: cover;">
                        {% endif %}
                    </div>
                    <div style="flex: 1;">
                        <strong>{{ item.product.name }}</strong>
                        <div style="color: #777;">Qty: {{ item.quantity }} × ৳{{ item.price_at_purchase }}</div>
                    </div>
                    <div style="font-weight: bold; color: #D35400;">
                        ৳{% widthratio item.quantity 1 item.price_at_purchase %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    {% else %}
    <div style="text-align: center; padding: 60px 20px; color: #777;">
        <i class="fas fa-shopping-bag" style="font-size: 4rem; margin-bottom: 20px; color: #ddd;"></i>
        <h2>No orders yet</h2>
        <p>Start shopping to see your orders here!</p>
        <a href="{% url 'product_list' %}" class="btn" style="background: #D35400; color: white; padding: 12px 30px; border-radius: 25px; text-decoration: none; margin-top: 20px;">Start Shopping</a>
    </div>
    {% endif %}
</div>
{% endblock %}