{% extends "base.html" %}
{% load static %}

{% block content %}
<style>
:root {
    --primary:#D35400;
    --secondary:#27AE60;
    --accent:#E67E22;
    --light:#FEF5E7;
    --dark:#2C3E50;
    --text:#333;
    --text-light:#777;
    --white:#fff;
    --gray:#f5f5f5;
    --border:#e0e0e0;
}
* {margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}
body {color:var(--text);background-color:var(--white);line-height:1.6;}
.container {width:100%;max-width:1200px;margin:0 auto;padding:0 20px;}
.btn {display:inline-block;padding:12px 28px;border-radius:50px;text-decoration:none;font-weight:600;transition:all .3s ease;cursor:pointer;border:none;font-size:1rem;}
.btn-primary {background-color:var(--primary);color:var(--white);border:2px solid var(--primary);}
.btn-primary:hover {background-color:transparent;color:var(--primary);}
.btn-secondary {background-color:transparent;color:var(--primary);border:2px solid var(--primary);}
.btn-secondary:hover {background-color:var(--primary);color:var(--white);}
.section-title {font-size:2.2rem;margin-bottom:2.5rem;color:var(--dark);position:relative;text-align:center;}
.section-title:after {content:'';display:block;width:80px;height:4px;background:var(--primary);margin:10px auto;border-radius:2px;}
.breadcrumb {padding:20px 0;background-color:var(--gray);}
.breadcrumb-content {display:flex;align-items:center;font-size:.9rem;}
.breadcrumb-content a {color:var(--text-light);text-decoration:none;}
.breadcrumb-content a:hover {color:var(--primary);}
.breadcrumb-divider {margin:0 10px;color:var(--text-light);}
.dashboard {padding:40px 0;}
.welcome-banner {background:linear-gradient(to right,var(--primary),var(--accent));color:white;padding:30px;border-radius:10px;margin-bottom:30px;display:flex;justify-content:space-between;align-items:center;}
.welcome-text h2 {font-size:1.8rem;margin-bottom:10px;}
.welcome-text p {opacity:.9;}
.dashboard-sections {display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:25px;margin-bottom:40px;}
.dashboard-card {background:white;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,.05);padding:25px;transition:transform .3s;}
.dashboard-card:hover {transform:translateY(-5px);}
.order-item {display:flex;align-items:center;padding:15px 0;border-bottom:1px solid var(--border);}
.order-item:last-child {border-bottom:none;}
.order-image {width:60px;height:60px;border-radius:8px;overflow:hidden;margin-right:15px;}
.order-image img {width:100%;height:100%;object-fit:cover;}
.order-details {flex:1;}
.order-name {font-weight:600;margin-bottom:5px;}
.order-info {font-size:.9rem;color:var(--text-light);}
.quick-actions {display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;}
.action-btn {display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;background:white;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,.05);text-decoration:none;color:var(--text);transition:all .3s;}
.action-btn:hover {transform:translateY(-5px);color:var(--primary);}
.action-icon {width:50px;height:50px;background:var(--light);border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:15px;color:var(--primary);font-size:1.2rem;}
.action-label {font-weight:600;}
@media(max-width:968px){.welcome-banner{flex-direction:column;text-align:center}.welcome-banner .btn{margin-top:20px}}
@media(max-width:768px){.breadcrumb-content{flex-wrap:wrap;justify-content:center}}
</style>

<section class="breadcrumb">
    <div class="container breadcrumb-content">
        <a href="{% url 'home' %}">Home</a>
        <span class="breadcrumb-divider">/</span>
        <span>Cart</span>
    </div>
</section>

<section class="dashboard container">
    <div class="welcome-banner">
        <div class="welcome-text">
            <h2>Your Shopping Cart</h2>
            <p>Review your items before proceeding to checkout.</p>
        </div>
        <a href="{% url 'product_list' %}" class="btn btn-primary">Continue Shopping</a>
    </div>

    {% if order and order.items.all %}
    <div class="dashboard-sections">
        <div class="dashboard-card" style="width:100%;">
            {% for item in order.items.all %}
            <div class="order-item">
                <div class="order-image">
                    {% if item.product.image %}
                    <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}">
                    {% else %}
                    <img src="https://via.placeholder.com/60" alt="No Image">
                    {% endif %}
                </div>
                <div class="order-details">
                    <div class="order-name">{{ item.product.name }}</div>
                    <div class="order-info">
                        Price: ৳ {{ item.product.discount_price|default:item.product.price }}<br>
                        Quantity: {{ item.quantity }}
                    </div>
                </div>
                <div style="display:flex; flex-direction:column; gap:5px;">
                    <form action="{% url 'remove_from_cart' item.id %}" method="POST">
                        {% csrf_token %}
                        <button class="btn btn-secondary" type="submit" style="padding:5px 10px; font-size:0.8rem;">Remove</button>
                    </form>
                </div>
            </div>
            {% endfor %}

            <div style="margin-top:20px; text-align:right; font-size:1.2rem; font-weight:600;">
                Total: ৳ {{ total }}
            </div>

            <div style="margin-top:20px; text-align:right;">
                <a href="#" class="btn btn-primary">Proceed to Checkout</a>
            </div>
        </div>
    </div>
    {% else %}
    <p style="text-align:center; margin-top:50px;">Your cart is empty.</p>
    <div style="text-align:center; margin-top:20px;">
        <a href="{% url 'products' %}" class="btn btn-primary">Shop Now</a>
    </div>
    {% endif %}
</section>
{% endblock %}
